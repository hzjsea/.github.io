---
title: 软件配置
categories:
    - machine
tags:
    - machine
abbrlink: cd35325c
date: 2019-12-29 13:11:16
---

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [软件配置杂记](#软件配置杂记)
  - [vscode](#vscode)
    - [vscode设置代码块](#vscode设置代码块)
    - [vscode 绑定vim自定义快捷键](#vscode-绑定vim自定义快捷键)
  - [chrome](#chrome)
    - [清除特定网址的缓存](#清除特定网址的缓存)
  - [ss](#ss)
    - [ss加强模式](#ss加强模式)
  - [mac](#mac)
    - [mac连接交换机](#mac连接交换机)
    - [mac下使用ftp](#mac下使用ftp)
    - [mac下改键记录](#mac下改键记录)
    - [mac /usr/bin/python 权限问题](#mac-usrbinpython-权限问题)
    - [Mac OS 中如何优雅的创建定时任务](#mac-os-中如何优雅的创建定时任务)
    - [hexo博客中构建自己的页面](#hexo博客中构建自己的页面)
    - [解决讨厌的.DS_Store](#解决讨厌的ds_store)
  - [vimrc基础配置](#vimrc基础配置)
  - [tmux配置](#tmux配置)
    - [安装Tumx](#安装tumx)
    - [tmux简介](#tmux简介)
    - [tumx 使用指南（会话篇）](#tumx-使用指南会话篇)
    - [tmux使用指南（窗口篇）](#tmux使用指南窗口篇)
    - [tmux美化篇](#tmux美化篇)
    - [tumx配置篇](#tumx配置篇)
    - [常用按键](#常用按键)
    - [具体配置](#具体配置)
  - [vim 文档中文注释乱码](#vim-文档中文注释乱码)

<!-- /code_chunk_output -->

<!-- more -->

# 软件配置杂记

## vscode 

### vscode设置代码块
1.由于markdown不是什么编程语法，vscode不支持自动提示和补全,所以我们要现在用户设置中打开markdown的自动补全
<font color='red'>ctrl+shift+p</font>打开设置---> setting ----> 在其中添加

```json
"[markdown]": {
    "editor.wordWrap": "on",
    "editor.quickSuggestions": true,
},
```

2.添加补全代码块
ctrl+shift+p ---> 输入markdown --> 打开markdown.json ---> 添加内容
```json
"Print to console": {
		"prefix": "fcr",
		"body": [
			"<font color='red'>$1</font>"
		],
		"description": "change font-color to red sign import "
	}
```
其中prefix 是指你代码块的简洁写法,在你输入的时候会出现代码块的提示
body是主体内容,也就是我们添加的代码块
description 是注释，你可以标注一下这代码块是用来干嘛的

### vscode 绑定vim自定义快捷键
在vscode中自定义vim快捷键
"vim.insertModeKeyBindings": [
        {
            "before": ["j", "j"],
            "after": ["<Esc>"]
        }
]
https://github.com/VSCodeVim/Vim/#key-remapping


## chrome

### 清除特定网址的缓存
打开开发者工具（F12），选择 Network——Disable cache 即可。需要清除某网站缓存时 F12 打开开发者工具就会自动清除这个网站的缓存，而不必清除所有网站的缓存了



## ss

### ss加强模式
<font color='red'> Mac电脑使用shadowsocks无法连接公司内网问题</font>
最近换了mac但是发现无法连接mac电脑，主要原因是在mac电脑中ss无法对所有软件都支持端口转发,这时候需要用到一个软件 proxifier,在这个上面做全局的端口转发即可

![](http://noback.upyun.com/imgproxifier软件.png) 
看到socks5的监听端口为 1086

1. 添加代理
![](http://noback.upyun.com/img20191022152254.png)
2. 添加规则
![](http://noback.upyun.com/img20191022152521.png)


## mac

### mac连接交换机
由于在mac中没有像windows中xshell这样简单方便的串口连接工具，因此我们只能使用screen来连接交换机

首先用串口线连接交换机，然后查看接入的串口设备，他们放在/dev下面 由于不同的串口线命名不同，但是他们应该都会带有usb字样
```bash
ls /dev | grep -i tty.*usb
screen /dev/tty.usbxxxxx  9600
```
这里9600为交换机的默认波特率，但你也可以在交换机更换波特率的内容

### mac下使用ftp
由于新的Mac系统去调了自带的telnet命令和ftp命令，所以第一步我们要安装ftp命令。
我的系统是10.13.6

ftp的安装需要很多的软件依赖
```bash
brew install telnet
brew install inetutils
brew link --overwrite inetutils 
```
<font color='red'>登陆-</font>
```bash
# 方式一
ftp ip
# 方式二
ftp 
open ip
```
https://www.jianshu.com/p/10c4e46c77f1
ftp使用方法
https://blog.csdn.net/tianlesoftware/article/details/5818990

### mac下改键记录
使用karabiner-element修改mac按键
修改内容为:
切换输入法 由之前的caps lock改成 shift
之前的caps 改成了 control

1. 下载karabiner-element
2. 在simple modifitions 中修改映射
from key caps_lock
to_key left_control
3. 修改shift和caps
由于karabiner-element不支持在窗口中修改，但可以指定json形式的配置文件
```bash
vi /Users/alpaca/.config/karabiner/karabiner.json
                "rules": [
                    {
                        "manipulators": [
                            {
                                "description": "Change left_shift to control+space when used alone",
                                "from": {
                                    "key_code": "left_shift",
                                    "modifiers": {
                                        "optional": [
                                            "any"
                                        ]
                                    }
                                },
                                "to": [
                                    {
                                        "key_code": "left_shift"
                                    }
                                ],
                                "to_if_alone": [
                                    {
                                        "key_code": "spacebar",
                                        "modifiers": [
                                            "left_control"
                                        ]
                                    }
                                ],
                                "type": "basic"
                            }
                        ]
                    }
                ]
```

### mac /usr/bin/python 权限问题

operation not permitted
一般情况下我们在使用mac系统过程中下载一些文件、新建一些项目之后，这些文件都会默认是只读状态，这时我们只需要简单的一句权限设置命令就可以解决
```bash
sudo chmod -R 777 filename 
```
/usr/bin下面的文件在mac中会出现一下的错误
```bash
operation not permitted 
```
这是因为mac启用了SIP（System Integrity Protection），增加了rootless机制，导致即使在root权限下依然无法修改文件，在必要时候为了能够修改下面的文件，我们只能关闭该保护机制


1) 重启 开机过程中按住command+R 进入保护模式
2) 打开终端 
```bash
csrutil disable 
```
3) 再次重启，就可以修改/usr/bin下的目录文件 


4)恢复保护机制
```bash
csrutil enable 
```

### Mac OS 中如何优雅的创建定时任务
mac 可以像linux一样使用crontab来使用定时任务.另外还有一个launchctl的工具

<font color='red'>配置文件 xxx.plist</font>  

```bash
<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> 
<plist version="1.0">
    <dict>
        <!--Plist 名称，必须唯一--> 
        <key>Label</key>
        <string>cn.rayjun..plist</string> 
        <!-- 指定要运行的程序的名称，可以是一个程序或者是一段脚本 -->   
        <key>ProgramArguments</key>
        <array>
            <string>/path/to/programer</string> 
        </array>
        <!-- 执行时间的指定 --> 
        <key>StartCalendarInterval</key> 
        <dict> 
            <!--在第几分钟会被执行 -->
            <key>Minute</key>
            <integer>00</integer>
            <!-- 在第几个小时会被执行-->
            <key>Hour</key> 
            <integer>22</integer> 
        </dict>
        <!-- 运行日志 -->
        <key>StandardOutPath</key>
        <string>/path/to/log/x.log</string>
        <!-- 错误日志 -->
        <key>StandardErrorPath</key> 
        <string>/path/to/err/x.err</string>
    </dict> 
</plist> 
```
在 Plist 中，支持两种定时任务的设置：
- StartInterval：定义任务多长时间（单位，秒）执行一次
- StartCalendarInterval：这个配置类似在 crontab 中的配置，指定具体的执行日期、星期、每月、每日的各个时间点，具体参照上面的配置文件。月份和天数的配置类似。

<font color='red'>存放点</font>
在 Mac 系统中，可以将需要处理的事情都写在 plist 文件中，plist 是一个 xml 格式的文件。plist 文件根据不同的需要可以放在不同的目录底下。Mac OS X 中支持放 plist 的目录如下：

- /Library/LaunchDaemons: 系统启动后就会执行
- /Library/LaunchAgents: 当用户登录系统后才会执行
- ~/Library/LaunchAgents: 用户自定义的 plist
- /System/Library/LaunchAgents: 由 Mac OS X 为用户定义的任务
- /System/Library/LaunchDaemons: 由 Mac OS X 定义的守护进程任务

<font color='red'>命令行</font>

```bash
launchctl load xx.plist # 启动程序
launchctl unload xx.plist # 停止程序
```


### 解决讨厌的.DS_Store
.DS_Store (Desktop Services Store) 是一种由苹果公司的 Mac OS X 操作系统所创造的隐藏文件，目的在于存贮目录的自定义属性，例如文件们的图标位置或者是背景色的选择。相当于 Windows 下的 desktop.ini

<font color='red'>为什么要解决？</font>
如果不处理，每次拷贝给你同事的文件里都会包含有这个文件，或者上传网页的时候，应该把这个文件删除比较妥当，因为里面包含了一些你不一定希望别人看见的信息。（尤其是网站，通过 .DS_Store 可以知道这个目录里面所有文件的清单，很多时候这是一个不希望出现的问题。）
```php
<?php //例子
　　$filepath = "images";
　　$handle = opendir($filepath);
　　while (false != ($file = readdir($handle))) {
　　    if ($file != "." && $file != ".." && $file != ".DS_Store" && $file != "index.html" && $file != "index.htm" && $file != "index.php") {
　　        if ($output) $output .= "|";
　　        $output .= "$file";
　　    }
　　}
　　closedir($handle);
　　echo "&files=$output&"; //输出遍历此文件夹所有的内容
?> 
```

<font color='red'>解决</font>

- 删除当前目录的.DS_Store
```bash
 find . -name '*.DS_Store' -type f -delete
```
- 删除所有目录的.DS_Store
```bash
sudo find / -name ".DS_Store" -depth -exec rm {} \;
```
- 禁止.DS_Store生成
```bash
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE
```
- 恢复.DS_Store生成
```bash
 defaults delete com.apple.desktopservices DSDontWriteNetworkStores
```
git上传忽略全局文件，并且在gitconfig中引入
```bash
touch ~/.gitigonre_global
# .gitignore_global
####################################
######## OS generated files ########
####################################
.DS_Store
.DS_Store?
*.swp
._*
.Spotlight-V100
.Trashes
Icon?
ehthumbs.db
Thumbs.db
####################################
############# packages #############
####################################
*.7z
*.dmg
*.gz
*.iso
*.jar
*.rar
*.tar
*.zip 

#.gitconfig
[filter "lfs"]
	required = true
	clean = git-lfs clean %f
	smudge = git-lfs smudge %f
[user]
	name = bingozb
	email = 454113692@qq.com
[core]
    excludesfile = /Users/bingo/.gitignore_global

```


## vimrc基础配置

```bash
" ---------------------文件树
" \"表示注视
" 关闭NERDTree快捷键
map <leader>t :NERDTreeToggle<CR>
" 当NERDTree为剩下的唯一窗口时自动关闭
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTree") && b:NERDTree.isTabTree()) | q | endif
" 修改树的显示图标
let g:NERDTreeDirArrowExpandable = '►'
let g:NERDTreeDirArrowCollapsible = '▼'
let NERDTreeAutoCenter=1

" 显示行号
let NERDTreeShowLineNumbers=1
" 是否显示隐藏文件
let NERDTreeShowHidden=1
" 设置宽度
let NERDTreeWinSize=25
" 在终端启动vim时，共享NERDTree
let g:nerdtree_tabs_open_on_console_startup=1
" 忽略一下文件的显示
let NERDTreeIgnore=['\.pyc','\~$','\.swp']
let g:NERDTreeIndicatorMapCustom = {
    \ "Modified"  : "✹",
    \ "Staged"    : "✚",
    \ "Untracked" : "✭",
    \ "Renamed"   : "➜",
    \ "Unmerged"  : "═",
    \ "Deleted"   : "✖",
    \ "Dirty"     : "✗",
    \ "Clean"     : "✔︎",
    \ 'Ignored'   : '☒',
    \ "Unknown"   : "?"
    \ }
" 打开NERDTree的快捷键设置为F6
map <F6> :NERDTreeToggle<CR>
```


## tmux配置

### 安装Tumx

```bash
# 先安装Homebrew，有则跳过
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
# 安装tmux
brew install tmux
```
tmux的配置文件在～/.tmux.conf
退出tmux后生成配置 source .tmux.conf


### tmux简介
对于tmux来说,最好能了解一些概念,在tmux中,一共分为 窗口（windows)，会话(session) 以及 面板(pane)三块内容,

### tumx 使用指南（会话篇）

```bash
tumx # 新建一个无名称的会话
tmux new -s demo  # (-s -session) 新建一个名称为demo的会话

tmux detach # 断开当前会话，会话在后台运行

tmux ls # 查看当前会话列表
tmux a # 默认进入第一个会话
tmux a -t demo # 进入到名称为demo的会话 (-t -tmux)

tmux kill-session -t demo #关闭demo会话
tmux kill-server # 关闭服务器，即所有的会话都将关闭

tmux ls # 查看所有会话

```

### tmux使用指南（窗口篇）

```bash
c-b  d # 断开当前窗口，后台运行
c-b  s # 在当前窗口打来其他正在运行的tmux
c-b  ? # 显示快捷键帮助文档
c-b  d # 断开当前会话
c-b  c+z # 挂起当前会话
c-b  r # 强制重载当前会话
c-b  s # 显示会话列表用于选择并切换
c-b  [ # 进入复制模式 按q退出
c-b  ] # 粘贴复制模式中的文本


c-b  c # 新建窗口
c-b  & # 关闭当前窗口 需要输入y n 确认
c-b  0~9 # 切换到指定窗口
c-b  p # 切换到指定窗口
c-b  n # 切换到下一个窗口
c-b  w # 打开窗口列表，用于切换窗口
c-b  , # 重命名当前窗口
c-b  . # 修改当前窗口编号
c-b  f # 快速定位到窗口
```

**Tmux使用手册地址：http://louiszhai.github.io/2017/09/30/tmux/**

还需要在记录一下

### tmux美化篇

### tumx配置篇
首先tmux默认将作为启动功能的前缀按键，当然我们可以自定义修改这个前缀按键，具体配置可以参照下面的配置文件

### 常用按键
在具体配置之前我们先来了解一下tmux常用按键,这里我已经把前缀按键替换成了c-z
```bash
# 常用按键
c-z ？显示快捷键帮助
c-z c-o 调换窗口位置
c-z space 采用上下布局或左右布局
c-z u 纵向分割窗口
c-z v 横向分割窗口
c-z q 显示分割窗口的编号
c-z hjkl 上下左右选择窗口
c-z c 创建新窗口
c-z 0-9 选择几号窗口
c-z n 切换下一个窗口
c-z p 选择前一个窗口
c-z w 以菜单方式显示及选择窗口
c-z t 显示时钟
c-z x 关闭面板
c-z d 退出当前窗口，丢到缓存 , tmux a 进入指定会话
c-z s 以菜单形式显示和选择会话

c-z $ 修改当前会话名字

tmux new -s xxx 创建并指定session名字
tmux ls 列出session
tmux a -t xxx进入已经在的session
tmux kill-session -t session_name 删除指定session


```

### 具体配置

```bash
# Tumx配置文件
# from hzj

# remap prefix from 'C-b' to 'C-a'
# 修改前缀权限
unbind C-b     # 取消Ctrl-B
set -g prefix C-z #  添加Ctrl-z
bind-key C-z send-prefix  绑定ctrl+z为新的前缀
 
# split panes using | and -
# 使用c-u c-v分割面板
bind u split-window -h
bind v split-window -v
unbind '"'
unbind %

# 使用c-(hijk)选择面板
bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U
 
bind-key e setw synchronize-panes
 
# Set the default terminal mode to 256color mode
set -g default-terminal "screen-256color"
 
# Set scrollback buffer to 10000
set -g history-limit 10000


# resize pane
bind -r ^k resizep -U 10 # upward (prefix Ctrl+k)
bind -r ^j resizep -D 10 # downward (prefix Ctrl+j)
bind -r ^h resizep -L 10 # to the left (prefix Ctrl+h)
bind -r ^l resizep -R 10 # to the right (prefix Ctrl+l)
 
# app
# htop (prefix !)
bind ! splitw htop
 
# python 
bind / command-prompt "splitw 'exec python3 %%'"
 
# reload config (prefix r)
bind r source ~/.tmux.conf \; display "Configuration reloaded!"
 
#-- statusbar --#
set -g status-interval 1
set -g status-keys vi
 
setw -g mode-keys vi
setw -g automatic-rename off
 
#-- colorscheme --#
#https://github.com/daethorian/conf-tmux/blob/master/colors/zenburn.conf


# mouse
# 支持鼠标
set-option -g mouse on 

# 支持复制粘贴连续到剪切板
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind C-v run "reattach-to-user-namespace pbpaste | tmux load-buffer - \; paste-buffer"
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'reattach-to-user-namespace pbcopy'bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"

set -g status-utf8 on # 状态栏支持utf8
set -g status-interval 1 # 状态栏刷新时间
set -g status-justify left # 状态栏列表左对齐
setw -g monitor-activity on # 非当前窗口有内容更新时在状态栏通知

set -g status-bg black # 设置状态栏背景黑色
set -g status-fg yellow # 设置状态栏前景黄色
set -g status-style "bg=black, fg=yellow" # 状态栏前景背景色

set -g status-left "#[bg=#FF661D] ❐ #S " # 状态栏左侧内容
set -g status-right 'Continuum status: #{continuum_status}' # 状态栏右侧内容
set -g status-left-length 300 # 状态栏左边长度300
set -g status-right-length 500 # 状态栏左边长度500

set -wg window-status-format " #I #W " # 状态栏窗口名称格式
set -wg window-status-current-format " #I:#W#F " # 状态栏当前窗口名称格式(#I：序号，#w：窗口名称，#F：间隔符)
set -wg window-status-separator "" # 状态栏窗口名称之间的间隔
set -wg window-status-current-style "bg=red" # 状态栏当前窗口名称的样式
set -wg window-status-last-style "fg=red" # 状态栏最后一个窗口名称的样式

set -g message-style "bg=#202529, fg=#91A8BA" # 指定消息通知的前景、后景色
set -g default-terminal "screen-256color"
```

## vim 文档中文注释乱码
```bash
Error E513, write error, conversion failed (make 'fenc' empty to override)"
```

解决办法，设置当前编码为utf-8
```bash
:set fileencoding=utf-8
```